#include<stdio.h>
#include<stdlib.h>

typedef struct queue
{
	int *arr,f,r,cnt;
}QUE;

int s[10];
int count1=0,count2=0,count3=0;

void indegree(int *a[],int v,int inq[],QUE *temp,int flag[])
{
	for(int i=0;i<v;i++)
	{
		for(int j=0;j<v;j++)
		{
			count1++;
			if(a[j][i]==1)
			{
				inq[i]=inq[i]+1;
				count1++;
			}
		}
		if(inq[i]==0)
		{
			temp->r=(temp->r+1)%v;
			temp->arr[temp->r]=i;
			temp->cnt=temp->cnt+1;
			flag[i]=1;
			count2++;
		}
		count2++;
	}
}

void sourceremove(int *a[],int v,QUE *temp,int inq[],int flag[])
{
	int cnt=0;
	while(temp->cnt!=0)
	{
		int source=temp->arr[temp->f];
		temp->f=(temp->f+1)%v;
		s[cnt]=source;
		temp->cnt=temp->cnt-1;
		cnt++;
		
		for(int i=0;i<v;i++)
		{
			count3++;
			if(a[source][i]==1)
			{
				inq[i]=inq[i]-1;
				count3++;
			}
			if(inq[i]==0&&flag[i]==0)
			{
				temp->r=(temp->r+1)%v;
				temp->arr[temp->r]=i;
				temp->cnt=temp->cnt+1;
				flag[i]=1;	
				count3++;
			}
		}
	}
}

int max(int num1,int num2,int num3)
{	
	int m=(num1>num2)?((num1>num3)?num1:num3):((num2>num3)?num2:num3);
	return m;
}

void plotter(int ch)
{
	FILE *fp1,*fp2;
	fp1=fopen("topoSR_best.txt","a");
	fp2=fopen("topoSR_worst.txt","a");
	
	for(int v=1;v<=10;v++)
	{
		int *arr[v];
		for(int i=0;i<v;i++)
			arr[i]=(int*)malloc(sizeof(int)*v);
		if(ch==0)
		{
			for(int i=0;i<v;i++)
			{
				for(int j=0;j<v;j++)
				{
					arr[i][j]=0;
				}
			}
			for(int i=0;i<v-1;i++)
				arr[i][i+1]=1;
		}
		if(ch==1)
		{
			for(int i=0;i<v;i++)
			{
				for(int j=0;j<v;j++)
				{
					if(i!=j)
						arr[i][j]=1;
					else
						arr[i][j]=0;
						
				}
			}
		}
		count1=0;
		count2=0;
		count3=0;
		QUE q;
		
		q.f=0;
		q.r=-1;
		q.cnt=0;
		q.arr=(int*)malloc(v*sizeof(int));
	
		int *inq=(int*)malloc(v*sizeof(int));
		for(int i=0;i<v;i++)
			inq[i]=0;
		
		int *flag=(int*)malloc(v*sizeof(int));
		for(int i=0;i<v;i++)
			flag[i]=0;
			
		indegree(arr,v,inq,&q,flag);
		sourceremove(arr,v,&q,inq,flag);
		
		int max1=max(count1,count2,count3);
		
		if(ch==0)
			fprintf(fp1,"%d\t%d\n",v,max1);
		if(ch==1)
			fprintf(fp2,"%d\t%d\n",v,max1);
	}
	fclose(fp1);
	fclose(fp2);
}

int main()
{
	for(int i=0;i<2;i++)
		plotter(i);
	return 0;
}
